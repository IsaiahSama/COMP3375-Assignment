{% extends "base.html" %}

{% block title %}
Delete Report
{% endblock %}

{% block content %}

<div id="centerContainer">
    <h1>Delete Report</h1>

    <p>Are you sure you want to delete this report?</p>

    <div id="report">
        This report will be loaded from component (Probably)
    </div>

    <div id="buttons">
        <button id="cancelButton">Cancel</button>
        <button id="actionButton" hx-delete="/reports/delete">Delete</button>
    </div>

</div>


<script>
document.body.addEventListener('htmx:afterRequest', function(event) {
    // Check if this is our delete request
    if (event.detail.elt.id === 'actionButton') {
        if (event.detail.successful) {
            // Successful deletion - redirect to home
            window.location.href = '/';
        } else {
            // Failed deletion - show error and redirect to reports
            const error = event.detail.xhr.responseText || 'Failed to delete report';
            alert(error);
            window.location.href = '/reports';
        }
    }
});
</script>

{% endblock %}
